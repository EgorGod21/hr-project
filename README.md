# hr-project
## Компоненты
### docker
Каталог `docker` содержит файлы `docker-compose.yaml`, `Dockerfile` и `README.md`.
- **docker-compose.yaml** используется для определения конфигурации Docker Compose для развертывания Airflow и связанных компонентов в Docker-контейнерах.

- **Dockerfile** содержит инструкции, которые будут применены при сборке Docker-образа и запуске контейнера.

- **README.md** является описательным и содержит инструкции по запуску и настройке Apache Airflow в Docker-контейнерах с использованием Docker Compose.

### dags
Каталог dags содержит каталог `layers`, а также файл `dm_dag.py`

- **`dm_dag.py`**

`dm_dag.py` - DAG для Airflow, который осуществляет ETL-процесс слоя dm. `dags.py` использует функцию из dag_manager.py для получения данных из переменной Airflow, а также определяет две задачи с помощью PythonOperator: creating_tables_for_dm и etl_process_for_dm. Сначала выполняется задача creating_tables_for_dm, а затем etl_process_for_dm. 

### layers

Каталог `layers` содержит файл `dag_manager.py`, а также каталог слоя `dm`.

- **Модуль `layers/dag_manager.py`**
Содержит вспомогательные функции и функцию etl_for_dm для ETL-процесса слоя dm. Функция get_data_from_airflow_var извлекает данные из переменной Airflow для соединение с базой данных, sql_query_executer_by_path выполняет SQL-скрипт по указанному пути, load_data_to_target_table выполняет загрузку трансформированных данные в целевую таблицу, а также осуществляется передача всех необходимых данных источника для преобразований в transform_rules.py. 

- **Директория `layers/dm`**

Каталог `dm` содержит файлы `dm_create.sql и transform_rules.py`, которые описаны ниже:

- **`dm_create.sql`**

SQL-скрипт, описывающий создание схемы и таблиц слоя dm, в которые затем реализуется загрузка трансформированных данных.

- **`transform_rules.py`**

Содержит функции описывающие логику трансформации данных, применяемые в процессе ETL. Эти правила трансформации используются в скриптах приведенных выше для преобразования данных из источников в целевые таблицы.

### files
Каталог `files` содержит файл `Архитектура решения.docx.`
- **Архитектура решения.docx**

Файл, содержащий схему архитектуры решения, описание компонентов и сущностей.
